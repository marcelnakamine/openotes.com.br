---
title: "PHP - Email autenticado com phpMailer e Gmail"
layout: "post"
permalink: "/2012/07/php-email-autenticado-com-phpmailer-e.html"
uuid: "6367326102646846246"
guid: "tag:blogger.com,1999:blog-871419307951952.post-6367326102646846246"
date: "2012-07-02 13:57:00"
updated: "2012-07-02 14:03:29"
description: 
blogger:
    siteid: "871419307951952"
    postid: "6367326102646846246"
    comments: "0"
categories: [PHP]
author: 
    name: "Marcos Nakamine"
    url: "https://plus.google.com/117200895427105171614?rel=author"
    image: "//lh6.googleusercontent.com/-6t0lck2nDvI/AAAAAAAAAAI/AAAAAAAAOBw/_9ON3AiIr48/s32-c/photo.jpg"
---

<div class="css-full-post-content js-full-post-content">
<pre style='color:#000000;background:#ffffff;'><span style='color:#5f5035;'>&lt;?php</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>require_once</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'class.phpmailer.php'</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#696969;'>// </span><span style='color:#5555dd;'>http://sourceforge.net/projects/phpmailer/files/</span><span style='color:#000000;'></span><br /><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#000000;'>             </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#800000;font-weight:bold; '>new</span><span style='color:#000000;'> PHPMailer</span><span style='color:#808030;'>(</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$body</span><span style='color:#000000;'>             </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#400000;'>eregi_replace</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>"[</span><span style='color:#0f69ff;'>\]</span><span style='color:#0000e6;'>"</span><span style='color:#808030;'>,</span><span style='color:#0000e6;'>''</span><span style='color:#808030;'>,</span><span style='color:#797997;'>$body</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-</span><span style='color:#808030;'>></span><span style='color:#000000;'>IsSMTP</span><span style='color:#808030;'>(</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>SMTPDebug</span><span style='color:#000000;'>  </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#008c00;'>2</span><span style='color:#800080;'>;</span><span style='color:#000000;'>                   </span><br /><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>SMTPAuth</span><span style='color:#000000;'>   </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#800000;font-weight:bold; '>true</span><span style='color:#800080;'>;</span><span style='color:#000000;'>               </span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>SMTPSecure</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'tls'</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>Host</span><span style='color:#000000;'>       </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'smtp.gmail.com'</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>Port</span><span style='color:#000000;'>       </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#008c00;'>587</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>Username</span><span style='color:#000000;'>   </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'email@gmail.com'</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>Password</span><span style='color:#000000;'>   </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'senha'</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>From</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'email@remetente.com.br'</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>FromName</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'Nome do remetente'</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>Subject</span><span style='color:#000000;'>    </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'Assunto'</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>WordWrap</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#008c00;'>50</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-</span><span style='color:#808030;'>></span><span style='color:#000000;'>MsgHTML</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'Mensagem'</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-</span><span style='color:#808030;'>></span><span style='color:#000000;'>AddAddress</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'email@destinatario.com.br'</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>if</span><span style='color:#808030;'>(</span><span style='color:#808030;'>!</span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-</span><span style='color:#808030;'>></span><span style='color:#000000;'>Send</span><span style='color:#808030;'>(</span><span style='color:#808030;'>)</span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#800080;'>{</span><span style='color:#000000;'> </span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>echo</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'Erro no envio: '</span><span style='color:#000000;'> </span><span style='color:#808030;'>.</span><span style='color:#000000;'> </span><span style='color:#797997;'>$mail</span><span style='color:#808030;'>-></span><span style='color:#797997;'>ErrorInfo</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800080;'>}</span><span style='color:#000000;'> </span><span style='color:#800000;font-weight:bold; '>else</span><span style='color:#000000;'> </span><span style='color:#800080;'>{</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>echo</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'Mensagem enviada.'</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span><br /><span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800080;'>}</span><span style='color:#000000;'></span><br /><span style='color:#5f5035;'>?></span><br /></pre>
</div>